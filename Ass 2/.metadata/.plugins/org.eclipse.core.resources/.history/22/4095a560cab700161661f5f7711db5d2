import java.net.MalformedURLException;
import java.rmi.Naming;
import java.rmi.NotBoundException;
import java.rmi.RMISecurityManager;
import java.rmi.RemoteException;
import java.rmi.registry.LocateRegistry;
import java.rmi.registry.Registry;
import java.util.ArrayList;


public class Component_main {
	
	public static Registry registry;
	public static int candidateAmount;
	public static int ordinaryAmount;
	public static Server server;
	public Component_RMI[] RMI_IDS; 
	
	public static void main(String[] args) throws Exception{
		
		candidateAmount = 2;
		ordinaryAmount = 2;
		
		ArrayList<Component_RMI> components = new ArrayList<Component_RMI>();
		
		try {
			registry = LocateRegistry.createRegistry(1099);
		} catch (RemoteException e) {
			e.printStackTrace();
		}
		for(int i=0; i<candidateAmount; i++){
			CandidateComponent new_component = new CandidateComponent(i+ordinaryAmount, server);
			components.add(new_component);
			Naming.rebind("CC"+(i+1), new_component );
		}
		for(int i=0; i<ordinaryAmount; i++){
			OrdinaryComponent new_component = new OrdinaryComponent(server, i);
			components.add(new_component);
			Naming.rebind("OC"+(i+1), new_component );
		}	
		
		System.out.println("started");
		//setRegistry();
		
		// create processes for both candidate components and ordinary components
		boolean ready = false;
		while(!ready){
			try {
				for (int i=0;i<candidateAmount; i++){
					Component_RMI proc_CC = (Component_RMI) Naming.lookup("CC"+(i+1));
				}
				for (int i=0;i<ordinaryAmount; i++){
					Component_RMI proc_OC = (Component_RMI) Naming.lookup("OC"+(i+1));
				}
				
			} catch (Exception e) {
				System.out.println("not ready for process");
			}
		}
		
		// create threads for all processes
		for (int i=0; i<)
		for (int i=0; i<candidateAmount; i++){
			Component_RMI daobj = proc[i];
			Thread tr = new Thread("Main_"+i){
				public void run(){
					
				}
			};
			
		}
	}
	public void setRegistry() throws RemoteException, NotBoundException{
		RMI_IDS = new Component_RMI[registry.list().length];
		for(int i=0;i<registry.list().length;i++){
			RMI_IDS[i] = (Component_RMI) registry.lookup(registry.list()[i]);
		}
	}
}
